#!/bin/sh

if [ -z "$NBC_TARGET" ]; then
    printf 'Do not run this script directly!\n'
    exit 1
fi

case $0 in
    *++) cc="nbc-clang++" ;;
    *)   cc="nbc-clang"   ;;
esac

case $NBC_TARGET in
    (arm64*-apple-macos*) stdlib=libc++ ;;
    (*) stdlib=libstdc++ ;;
esac

exec "$cc" \
    -mlinker-version=762 \
    -stdlib="$stdlib" \
    "$@" \
    -isysroot "$NBC_SDK" \
    -target "$NBC_TARGET" \
    -fuse-ld=ld64 \
    -Wno-unused-command-line-argument
